# sports/squash/exercises/boast_cross_drive.yaml

family: Boast-Cross-Drive
family_id: squash.family.pattern.diagonal.boast_cross_drive
category: diagonal
base_description: A three-shot sequence of boast,cross and drive to move the opponent diagonally.

# Defining parameters that can be applied to the variants of the exercise below
# This eliminates the need for separate forehand/backhand entries.
parameters:
  - name: shotSide
    description: The side of the court the exercise is focused on.
    options: [forehand, backhand]

# All variation of this exercise
variants:
  # Variant 1 – Deep Only
  - variant_id: deep_only
    name: Deep Only
    description: A version where all shots excluding the boast must land behind the T-line.
    # METADATA: gives you information about the variant
    types: [drill, conditioned_game]
    roles:
      pattern: alternating # no fixed role
      exercises_per_side: 1 # Players do not need to change role before changing sides
    rules:
      sequence:
        - "boast (initiating player)"
        - "cross (opponent)"
        - "drive (initiating player)"
        - "restart pattern with next boast"
      constraint: "All shots excluding the boast must land behind the T-line."
    allowed_actions: ["drive", "deep drive", "hard drive", "straight drive",
                      "volley drive", "volley deep drive", "volley hard drive", "volley straight drive",
                      "boast", "2-wall boast", "3-wall boast", "volley 2-wall boast", "volley 3-wall boast",
                      "cross", "cross lob", "deep cross", "wide cross", "cross down the middle", "hard cross"]

  # Variant 2 – Kills Allowed
  - variant_id: kills_allowed
    name: With Kills Allowed
    description: >
      players follow the base pattern, but are also permitted to play kills (straight kills or cross kills). 
      Here the second bounce of deep shots must land behind the T-line.
    types: [ drill, conditioned_game ]
    roles:
      pattern: alternating # no fixed role
      exercises_per_side: 1 # Players do not need to change role before changing sides
    rules:
      sequence:
        - "boast (initiating player)"
        - "cross (opponent)"
        - "drive (initiating player)"
        - "restart pattern with next boast"
      # IMPORTANT SECTION SOFT/HARD CONSTRAINT
      constraint: "Second bounce behind the T-line"
    allowed_actions: ["drive", "deep drive", "hard drive", "straight drive",
                      "volley drive", "volley deep drive", "volley hard drive", "volley straight drive",
                      "boast", "2-wall boast", "3-wall boast", "volley 2-wall boast", "volley 3-wall boast",
                      "cross", "cross lob", "deep cross", "wide cross", "cross down the middle", "hard cross",
                      "straight kill", "volley straight kill", "cross kill"]

  # Variant 3: Counter_Drop
  - variant_id: counter_drop
    name: With Counter Drops
    description: >
      After a boast, players can engage in a counter-drop rally before hitting a cross to reset the main pattern.
    types: [drill, conditioned_game]
    roles:
      pattern: alternating # no fixed role
      exercises_per_side: 1 # Players do not need to change role before changing sides
    rules:
      sequence:
        - "boast (initiating player)"
        - "( straight drop (B) | straight drop (A) | counter drop (B) | counter drop (A) )*" # zero or more drops
        - "cross (whoever chooses)"                      # first cross ends the drops
        - "drive (opponent of cross)"                    # deep / straight drive
        - "restart pattern with next boast"
      constraint: "Every cross and the succeeding drive must land behind the T-line."
    allowed_actions: [ "drive", "deep drive", "hard drive", "straight drive",
                       "volley drive", "volley deep drive", "volley hard drive", "volley straight drive",
                       "boast", "2-wall boast", "3-wall boast", "volley 2-wall boast", "volley 3-wall boast",
                       "cross", "cross lob", "deep cross", "wide cross", "cross down the middle", "hard cross",
                       "drop", "counter drop", "straight drop"]

  # Variant 4 – Extra Drive
  - variant_id: extra_drive
    name: With Extra Drive
    description: >
      The standard pattern, but one optional extra drive (after the first drive only) is allowed 
      by either player before the pattern resets.
    types: [drill, conditioned_game]
    roles:
      pattern: alternating # no fixed role
      exercises_per_side: 1 # Players do not need to change role before changing sides
    rules:
      description: >
        Follow the sequence. One (and only one) additional drive is then allowed by either player. After that extra drive, the pattern restarts with a new boast.
      sequence:
        - "boast (initiating player)"
        - "cross (opponent)"
        - "drive (initiating player)   # mandatory"
        - "optional: ( straight drive (initiating player) | straight drive (opponent) | deep drive (initiating player) | deep drive (opponent) | hard drive (initiating player) | hard drive (opponent)  )"
        - "restart pattern with next boast"
      constraint: >
        All crosses and both drives must land behind the T-line. 
        The optional extra drive can be used only once per rally.
    allowed_actions: ["drive", "deep drive", "hard drive", "straight drive",
                        "volley drive", "volley deep drive", "volley hard drive", "volley straight drive",
                        "boast", "2-wall boast", "3-wall boast", "volley 2-wall boast", "volley 3-wall boast",
                        "cross", "cross lob", "deep cross", "wide cross", "cross down the middle", "hard cross"]

  # Variant 5 – Open Drop
  - variant_id: open_drop
    name: With Open Rally via Counter Drop
    description: >
      A counter-drop after the initial boast opens the rally up to any shot, turning 
      it into a full court point.
    types: [conditioned_game]
    roles:
      pattern: alternating # no fixed role
      exercises_per_side: 1 # Players do not need to change role before changing sides
    rules:
      description: >
        Each rally begins with a boast. Players should alternate who initiates the rally.
        - Base path: follow boast → cross → drive.
        - Drop branch: If the boast is returned with a straight counter-drop, the rally becomes 'open' and 
        is played out until a player wins the point. Any shot is legal during the open rally.
      sequence:
        - "boast (initiating player)"
        - "cross (opponent)"   # or whoever chooses
        - "drive (initiating player)"
        - "restart pattern with next boast"
    allowed_actions: ["drive", "deep drive", "hard drive", "straight drive",
                        "volley drive", "volley deep drive", "volley hard drive", "volley straight drive",
                        "cross", "cross lob", "deep cross", "wide cross", "cross down the middle", "hard cross",
                        "cross-court nick", "volley cross-court nick",
                        "volley cross", "volley hard cross", "volley cross lob",
                        "drop", "counter drop", "cross drop", "straight drop",
                        "volley cross drop", "volley straight drop",
                        "boast", "2-wall boast", "3-wall boast", "trickle boast", "reverse boast",
                        "volley 2-wall boast", "volley 3-wall boast", "volley reverse boast",
                        "lob", "straight lob", "cross lob",
                        "volley straight lob", "volley cross lob",
                        "straight kill", "cross kill",
                        "volley cross kill", "volley straight kill"]
